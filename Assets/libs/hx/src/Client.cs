// Generated by Haxe 4.0.0+ef18b627e
using haxe.root;

#pragma warning disable 109, 114, 219, 429, 168, 162
public class Client {
	
	public Client() {
		unchecked {
			#line 45 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), "\u662f\u5426\u6211\u7684\u7248\u672c\uff1f", default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"new", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (45) )}));
			#line 47 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			object a = new global::haxe.lang.DynamicObject(new int[]{97}, new object[]{"\u4e2d\u6587\u6d4b\u8bd5"}, new int[]{}, new double[]{});
			#line 49 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.io.Bytes b = global::org.msgpack.MsgPack.encode(a);
			object c = global::org.msgpack.MsgPack.decode(b, null);
			#line 52 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.getField(c, "a", 97, true), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"new", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (52) )}));
			#line 61 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.lang.Function replacer = null;
			#line 61 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			string space = null;
			#line 61 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			string a1 = global::haxe.format.JsonPrinter.print(((object) (a) ), replacer, space);
			object b1 = new global::haxe.format.JsonParser(((string) (a1) )).doParse();
			#line 64 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::web.proto.WebEventDispatch.getInstance().addEventListener(((string) ("login") ), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "onLogin", 254900170)) ), default(object), default(object), default(object));
			global::web.proto.WebEventDispatch.getInstance().addEventListener(((string) ("hall_Reg") ), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "onReg", 846097781)) ), default(object), default(object), default(object));
			#line 67 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::web.proto.WebEventDispatch.getInstance().addEventListener(((string) ("error") ), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "onErrorFromServer", 1415277398)) ), default(object), default(object), default(object));
		}
		#line default
	}
	
	
	public static void main() {
		#line 41 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		new global::Client();
	}
	#line default
	
	public global::System.Action onSocketOpenCS;
	
	public global::System.Action onSocketCloseCS;
	
	public global::System.Action<object> onSocketErrorCS;
	
	public global::System.Action<global::web.proto.HallEvent> onLoginCS;
	
	public global::System.Action<global::web.proto.HallEvent> onRegCS;
	
	public global::System.Action<global::web.proto.ErrorEventCS> onGlobalError;
	
	public global::client.PlayerCS testPlayer;
	
	public virtual void onErrorFromServer(global::web.proto.ErrorEventCS e) {
		#line 74 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		this.onGlobalError.Invoke(((global::web.proto.ErrorEventCS) (e) ));
	}
	#line default
	
	public virtual void connectWithIP(string ip, int port) {
		unchecked {
			#line 77 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::Client _gthis = this;
			global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat("", ip), ":"), global::haxe.lang.Runtime.toString(port)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"connectWithIP", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (78) )}));
			#line 80 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.MainLoop.addThread(new global::Client_connectWithIP_80__Fun(port, ip, _gthis));
		}
		#line default
	}
	
	
	public virtual void onOpen() {
		unchecked {
			#line 93 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), "\u63e1\u624b", default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"onOpen", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (93) )}));
			#line 103 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			this.onSocketOpenCS.Invoke();
		}
		#line default
	}
	
	
	public virtual void LoginWithOpenID(string openid) {
		unchecked {
			#line 112 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			object tp = new global::haxe.lang.DynamicObject(new int[]{23515, 563366437}, new object[]{((object) (-1) ), openid}, new int[]{}, new double[]{});
			global::web.SocketAsync.sendCS(((int) (((uint) (1) )) ), ((int) (8) ), -1, global::org.msgpack.MsgPack.encode(tp), null);
		}
		#line default
	}
	
	
	public virtual void Login(string mobile, string password) {
		unchecked {
			#line 122 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			object tp = null;
			#line 122 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			{
				#line 122 "D:\\project\\sangong\\sangong\\src\\Client.hx"
				string __temp_odecl1 = global::haxe.crypto.Md5.encode(password);
				#line 122 "D:\\project\\sangong\\sangong\\src\\Client.hx"
				tp = new global::haxe.lang.DynamicObject(new int[]{1064807522, 1221600027}, new object[]{mobile, __temp_odecl1}, new int[]{}, new double[]{});
			}
			
			#line 123 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::web.SocketAsync.sendCS(((int) (((uint) (1) )) ), ((int) (8) ), -1, global::org.msgpack.MsgPack.encode(tp), null);
		}
		#line default
	}
	
	
	public virtual bool regist(string mobile, string ps) {
		unchecked {
			#line 131 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.root.EReg r = new global::haxe.root.EReg("1\\d{10}", "");
			#line 133 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			bool b = r.match(mobile);
			if (( ( ( ( ( ps == null ) || ( mobile == null ) ) || ( mobile.Length != 11 ) ) || ( ps.Length < 6 ) ) ||  ! (b)  )) {
				#line 135 "D:\\project\\sangong\\sangong\\src\\Client.hx"
				global::haxe.Log.trace.__hx_invoke2_o(default(double), "\u6ce8\u518c\u8d26\u53f7\u6216\u8005\u5bc6\u7801\u4e0d\u7b26\u5408\u6761\u4ef6", default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"regist", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (135) )}));
				return false;
			}
			
			#line 139 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			string password = global::haxe.crypto.Md5.encode(ps);
			object tp = new global::haxe.lang.DynamicObject(new int[]{1064807522, 1221600027}, new object[]{mobile, password}, new int[]{}, new double[]{});
			#line 142 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::web.SocketAsync.sendCS(((int) (((uint) (1) )) ), ((int) (9) ), -1, global::org.msgpack.MsgPack.encode(tp), null);
			#line 144 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			return true;
		}
		#line default
	}
	
	
	public virtual void onReg(global::web.proto.HallEvent e) {
		unchecked {
			#line 148 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.lang.Function replacer = null;
			#line 148 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			string space = null;
			#line 148 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("\u6ce8\u518c\u6210\u529f ", global::haxe.format.JsonPrinter.print(((object) (e.player) ), replacer, space)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"onReg", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (148) )}));
			this.onRegCS.Invoke(((global::web.proto.HallEvent) (e) ));
		}
		#line default
	}
	
	
	public virtual void onLogin(global::web.proto.HallEvent e) {
		unchecked {
			#line 153 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.lang.Function replacer = null;
			#line 153 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			string space = null;
			#line 153 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("\u767b\u9646\u6210\u529f ", global::haxe.format.JsonPrinter.print(((object) (e.player) ), replacer, space)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"onLogin", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (153) )}));
			#line 155 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			object p = e.player;
			#line 157 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.root.Array k = global::haxe.root.Reflect.fields(p);
			this.onLoginCS.Invoke(((global::web.proto.HallEvent) (e) ));
		}
		#line default
	}
	
	
	public virtual void onClose() {
		unchecked {
			#line 164 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), "oncloese", default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"onClose", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (164) )}));
			this.onSocketCloseCS.Invoke();
		}
		#line default
	}
	
	
	public virtual void onError(string e) {
		unchecked {
			#line 169 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			global::haxe.Log.trace.__hx_invoke2_o(default(double), "onError", default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"onError", "Client", "src/Client.hx"}, new int[]{1981972957}, new double[]{((double) (169) )}));
			#line 171 "D:\\project\\sangong\\sangong\\src\\Client.hx"
			this.onSocketErrorCS.Invoke(((object) (e) ));
		}
		#line default
	}
	
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public class Client_connectWithIP_80__Fun : global::haxe.lang.Function {
	
	public Client_connectWithIP_80__Fun(int port, string ip, global::Client _gthis) : base(0, 0) {
		#line 82 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		this.port = port;
		#line 82 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		this.ip = ip;
		#line 82 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		this._gthis = _gthis;
	}
	#line default
	
	public override object __hx_invoke0_o() {
		#line 82 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		global::web.SocketAsync.installSocket(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat(global::haxe.lang.Runtime.concat("", this.ip), ":"), global::haxe.lang.Runtime.toString(this.port)), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this._gthis, "onOpen", 1816005769)) ), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this._gthis, "onClose", 1587590681)) ), ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this._gthis, "onError", 157772329)) ), null);
		#line 82 "D:\\project\\sangong\\sangong\\src\\Client.hx"
		return null;
	}
	#line default
	
	public int port;
	
	public string ip;
	
	public global::Client _gthis;
	
}


