// Generated by Haxe 4.0.0+ef18b627e
using haxe.root;

#pragma warning disable 109, 114, 219, 429, 168, 162
namespace hx.ws {
	public class WebSocketCommon : global::haxe.lang.HxObject {
		
		static WebSocketCommon() {
			unchecked{
				#line 9 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::hx.ws.WebSocketCommon._nextId = 1;
			}
		}
		#line default
		
		public WebSocketCommon(global::haxe.lang.EmptyObject empty) {
		}
		
		
		public WebSocketCommon(global::hx.ws.cs.NonBlockingSocket socket) {
			#line 25 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.WebSocketCommon.__hx_ctor_hx_ws_WebSocketCommon(this, socket);
		}
		#line default
		
		protected static void __hx_ctor_hx_ws_WebSocketCommon(global::hx.ws.WebSocketCommon __hx_this, global::hx.ws.cs.NonBlockingSocket socket) {
			#line 64 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this._lastPong = null;
			#line 63 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this._payload = null;
			#line 23 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this._buffer = new global::hx.ws.Buffer();
			#line 16 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this._lastError = null;
			#line 15 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this._onopenCalled = null;
			#line 11 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			__hx_this.state = global::hx.ws.State.Handshake;
			#line 25 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			{
				#line 26 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				__hx_this.id = global::hx.ws.WebSocketCommon._nextId++;
				if (( socket == null )) {
					#line 28 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					__hx_this._socket = new global::hx.ws.cs.NonBlockingSocket();
					__hx_this._socket.setBlocking(false);
				}
				else {
					#line 31 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					__hx_this._socket = socket;
				}
				
			}
			
		}
		#line default
		
		public static int _nextId;
		
		public static global::haxe.io.Bytes generateMask() {
			unchecked {
				#line 206 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::haxe.io.Bytes maskData = global::haxe.io.Bytes.alloc(4);
				{
					#line 207 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					int v = global::haxe.root.Std.random(256);
					#line 207 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					maskData.b[0] = ((byte) (v) );
				}
				
				#line 208 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				{
					#line 208 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					int v1 = global::haxe.root.Std.random(256);
					#line 208 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					maskData.b[1] = ((byte) (v1) );
				}
				
				#line 209 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				{
					#line 209 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					int v2 = global::haxe.root.Std.random(256);
					#line 209 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					maskData.b[2] = ((byte) (v2) );
				}
				
				#line 210 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				{
					#line 210 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					int v3 = global::haxe.root.Std.random(256);
					#line 210 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					maskData.b[3] = ((byte) (v3) );
				}
				
				#line 211 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				return maskData;
			}
			#line default
		}
		
		
		public static global::haxe.io.Bytes applyMask(global::haxe.io.Bytes payload, global::haxe.io.Bytes mask) {
			#line 215 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::haxe.io.Bytes maskedPayload = global::haxe.io.Bytes.alloc(payload.length);
			{
				#line 216 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				int _g = 0;
				#line 216 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				int _g1 = payload.length;
				#line 216 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				while (( _g < _g1 )) {
					#line 216 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					int n = _g++;
					#line 216 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					maskedPayload.b[n] = ((byte) (( ((int) (((byte) (payload.b[n]) )) ) ^ ((int) (((byte) (mask.b[( n % mask.length )]) )) ) )) );
				}
				
			}
			
			#line 217 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			return maskedPayload;
		}
		#line default
		
		public int id;
		
		public global::hx.ws.State state;
		
		public global::hx.ws.cs.NonBlockingSocket _socket;
		
		public object _onopenCalled;
		
		public object _lastError;
		
		public global::haxe.lang.Function onopen;
		
		public global::haxe.lang.Function onclose;
		
		public global::haxe.lang.Function onerror;
		
		public global::haxe.lang.Function onmessage;
		
		public global::hx.ws.Buffer _buffer;
		
		public virtual void send(global::haxe.io.Bytes data) {
			unchecked {
				#line 38 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				this.sendFrame(data, ((int) (2) ));
			}
			#line default
		}
		
		
		public virtual void sendFrame(global::haxe.io.Bytes data, int type) {
			#line 53 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			this.writeBytes(this.prepareFrame(data, type, true));
		}
		#line default
		
		public bool _isFinal;
		
		public bool _isMasked;
		
		public int _opcode;
		
		public bool _frameIsBinary;
		
		public int _partialLength;
		
		public int _length;
		
		public global::haxe.io.Bytes _mask;
		
		public global::hx.ws.Buffer _payload;
		
		public global::haxe.root.Date _lastPong;
		
		public virtual void handleData() {
			unchecked {
				#line 67 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (this.state._hx_index) {
					case 1:
					{
						#line 69 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this._buffer.available < 2 )) {
							#line 69 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							return;
						}
						
						#line 71 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						int b0 = this._buffer.readByte();
						int b1 = this._buffer.readByte();
						#line 74 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._isFinal = ( (( ( b0 >> 7 ) & 1 )) != 0 );
						this._opcode = ((int) (( b0 & 15 )) );
						#line 76 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._frameIsBinary = ( (( this._opcode == ((int) (1) ) )) ? (false) : (( (( this._opcode == ((int) (2) ) )) ? (true) : (this._frameIsBinary) )) );
						this._partialLength = ( b1 & 127 );
						#line 78 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._isMasked = ( (( ( b1 >> 7 ) & 1 )) != 0 );
						#line 80 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.state = global::hx.ws.State.HeadExtraLength;
						this.handleData();
						#line 68 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 2:
					{
						#line 83 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this._partialLength == 126 )) {
							#line 84 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							if (( this._buffer.available < 2 )) {
								#line 84 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								return;
							}
							
							#line 85 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._length = ((int) (this._buffer.readUnsignedShort()) );
						}
						else if (( this._partialLength == 127 )) {
							#line 87 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							if (( this._buffer.available < 8 )) {
								#line 87 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								return;
							}
							
							#line 88 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							uint tmp = this._buffer.readUnsignedInt();
							if (((bool) (( tmp != 0 )) )) {
								#line 89 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								throw global::haxe.lang.HaxeException.wrap("message too long");
							}
							
							#line 90 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._length = ((int) (this._buffer.readUnsignedInt()) );
						}
						else {
							#line 92 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._length = this._partialLength;
						}
						
						#line 94 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.state = global::hx.ws.State.HeadExtraMask;
						this.handleData();
						#line 82 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 3:
					{
						#line 97 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (this._isMasked) {
							#line 98 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							if (( this._buffer.available < 4 )) {
								#line 98 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								return;
							}
							
							#line 99 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._mask = this._buffer.readBytes(4);
						}
						
						#line 101 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.state = global::hx.ws.State.Body;
						this.handleData();
						#line 96 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 4:
					{
						#line 104 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this._buffer.available < this._length )) {
							#line 104 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							return;
						}
						
						#line 105 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this._payload == null )) {
							#line 106 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._payload = new global::hx.ws.Buffer();
						}
						
						#line 108 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._payload.writeBytes(this._buffer.readBytes(this._length));
						#line 110 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						switch (this._opcode) {
							case 0:
							case 1:
							case 2:
							{
								#line 112 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								if (this._isFinal) {
									#line 113 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									global::haxe.io.Bytes messageData = this._payload.readAllAvailableBytes();
									global::haxe.io.Bytes unmaskedMessageData = ( (this._isMasked) ? (global::hx.ws.WebSocketCommon.applyMask(messageData, this._mask)) : (messageData) );
									#line 115 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									if (this._frameIsBinary) {
										#line 116 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
										if (( this.onmessage != null )) {
											#line 117 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
											global::hx.ws.Buffer buffer = new global::hx.ws.Buffer();
											buffer.writeBytes(unmaskedMessageData);
											#line 119 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
											this.onmessage.__hx_invoke1_o(default(double), new global::haxe.lang.DynamicObject(new int[]{1113806378, 1292432058}, new object[]{buffer, "binary"}, new int[]{}, new double[]{}));
										}
										
									}
									else {
										#line 125 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
										string stringPayload = global::hx.ws.Utf8Encoder.decode(unmaskedMessageData);
										global::hx.ws.Log.data(stringPayload, this.id);
										#line 127 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
										if (( this.onmessage != null )) {
											#line 128 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
											this.onmessage.__hx_invoke1_o(default(double), new global::haxe.lang.DynamicObject(new int[]{1113806378, 1292432058}, new object[]{stringPayload, "text"}, new int[]{}, new double[]{}));
										}
										
									}
									
									#line 134 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									this._payload = null;
								}
								
								#line 112 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								break;
							}
							
							
							case 8:
							{
								#line 141 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								this.close();
								#line 141 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								break;
							}
							
							
							case 9:
							{
								#line 137 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								this.sendFrame(this._payload.readAllAvailableBytes(), ((int) (10) ));
								#line 137 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								break;
							}
							
							
							case 10:
							{
								#line 139 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								this._lastPong = new global::haxe.root.Date(((global::System.DateTime) (global::System.DateTime.Now) ));
								#line 139 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								break;
							}
							
							
						}
						
						#line 144 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this.state != global::hx.ws.State.Closed )) {
							#line 144 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this.state = global::hx.ws.State.Head;
						}
						
						#line 145 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.handleData();
						#line 103 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 5:
					{
						#line 147 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.close();
						#line 147 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					default:
					{
						#line 149 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("State not impl: ", global::haxe.root.Std.@string(this.state)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"handleData", "hx.ws.WebSocketCommon", "src/hx/ws/WebSocketCommon.hx"}, new int[]{1981972957}, new double[]{((double) (149) )}));
						#line 149 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
				}
				
			}
			#line default
		}
		
		
		public virtual void close() {
			unchecked {
				#line 154 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (( this.state != global::hx.ws.State.Closed )) {
					#line 155 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					try {
						#line 156 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						global::hx.ws.Log.debug("Closed", this.id);
						this.sendFrame(global::haxe.io.Bytes.alloc(0), ((int) (8) ));
						#line 158 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.state = global::hx.ws.State.Closed;
						this._socket.close();
					}
					catch (global::System.Exception catchallException){
						#line 155 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						global::haxe.lang.Exceptions.exception = catchallException;
						#line 160 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						object e = ( (( catchallException is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException) ).obj) : ((object) (catchallException) ) );
					}
					
					
					#line 162 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					if (( this.onclose != null )) {
						#line 163 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onclose.__hx_invoke0_o();
					}
					
				}
				
			}
			#line default
		}
		
		
		public virtual void writeBytes(global::haxe.io.Bytes data) {
			#line 169 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			try {
				#line 170 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				this._socket.output.write(data);
				this._socket.output.flush();
			}
			catch (global::System.Exception catchallException){
				#line 169 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::haxe.lang.Exceptions.exception = catchallException;
				#line 172 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				{
					#line 172 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					object e = ( (( catchallException is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException) ).obj) : ((object) (catchallException) ) );
					global::hx.ws.Log.debug(global::haxe.lang.Runtime.toString(e), this.id);
					#line 174 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					if (( this.onerror != null )) {
						#line 175 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onerror.__hx_invoke1_o(default(double), global::haxe.root.Std.@string(e));
					}
					
				}
				
			}
			
			
		}
		#line default
		
		public virtual global::haxe.io.Bytes prepareFrame(global::haxe.io.Bytes data, int type, bool isFinal) {
			unchecked {
				#line 181 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::hx.ws.Buffer @out = new global::hx.ws.Buffer();
				bool isMasked = false;
				#line 183 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::haxe.io.Bytes mask = global::hx.ws.WebSocketCommon.generateMask();
				int sizeMask = ( (isMasked) ? (128) : (0) );
				#line 186 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				@out.writeByte(( global::hx.ws._OpCode.OpCode_Impl_.toInt(type) | (( (isFinal) ? (128) : (0) )) ));
				#line 188 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (( data.length < 126 )) {
					#line 189 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					@out.writeByte(( data.length | sizeMask ));
				}
				else if (( data.length < 65536 )) {
					#line 191 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					@out.writeByte(( 126 | sizeMask ));
					@out.writeShort(data.length);
				}
				else {
					#line 194 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					@out.writeByte(( 127 | sizeMask ));
					@out.writeInt(0);
					#line 196 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					@out.writeInt(data.length);
				}
				
				#line 199 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (isMasked) {
					#line 199 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					@out.writeBytes(mask);
				}
				
				#line 201 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				@out.writeBytes(( (isMasked) ? (global::hx.ws.WebSocketCommon.applyMask(data, mask)) : (data) ));
				return @out.readAllAvailableBytes();
			}
			#line default
		}
		
		
		public virtual void process() {
			unchecked {
				#line 221 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (global::haxe.lang.Runtime.eq(this._onopenCalled, false)) {
					#line 222 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					this._onopenCalled = true;
					if (( this.onopen != null )) {
						#line 224 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onopen.__hx_invoke0_o();
					}
					
				}
				
				#line 228 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (( this._lastError != null )) {
					#line 229 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					object error = this._lastError;
					this._lastError = null;
					#line 231 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					if (( this.onerror != null )) {
						#line 232 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onerror.__hx_invoke1_o(default(double), error);
					}
					
				}
				
				#line 236 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				bool needClose = false;
				object result = null;
				#line 239 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				try {
					#line 239 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					result = global::hx.ws.cs.NonBlockingSocket.@select(((global::haxe.root.Array) (new global::haxe.root.Array(new object[]{this._socket})) ), default(global::haxe.root.Array), default(global::haxe.root.Array), ((object) (0.01) ));
				}
				catch (global::System.Exception catchallException){
					#line 238 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					global::haxe.lang.Exceptions.exception = catchallException;
					#line 240 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					{
						#line 240 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						object e = ( (( catchallException is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException) ).obj) : ((object) (catchallException) ) );
						global::hx.ws.Log.debug(global::haxe.lang.Runtime.concat("Error selecting socket: ", global::haxe.root.Std.@string(e)), null);
						#line 242 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						needClose = true;
					}
					
				}
				
				
				#line 245 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (( ( result != null ) && ( needClose == false ) )) {
					#line 246 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					if (( ((global::haxe.root.Array) (global::haxe.lang.Runtime.getField(result, "read", 1269254998, true)) ).length > 0 )) {
						#line 248 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						try {
							#line 248 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							while (true) {
								#line 249 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								global::haxe.io.Bytes data = global::haxe.io.Bytes.alloc(1024);
								int read = this._socket.input.readBytes(data, 0, data.length);
								#line 251 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								if (( read <= 0 )) {
									#line 252 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									break;
								}
								
								#line 254 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								global::hx.ws.Log.debug(global::haxe.lang.Runtime.concat("Bytes read: ", global::haxe.lang.Runtime.toString(read)), this.id);
								this._buffer.writeBytes(data.sub(0, read));
							}
							
						}
						catch (global::System.Exception catchallException1){
							#line 247 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							global::haxe.lang.Exceptions.exception = catchallException1;
							#line 257 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							{
								#line 257 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								object e1 = ( (( catchallException1 is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException1) ).obj) : ((object) (catchallException1) ) );
								#line 259 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("error  ", global::haxe.root.Std.@string(e1)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"process", "hx.ws.WebSocketCommon", "src/hx/ws/WebSocketCommon.hx"}, new int[]{1981972957}, new double[]{((double) (259) )}));
								needClose = true;
								#line 261 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								if (( e1 is global::System.IO.IOException )) {
									#line 262 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									global::System.IO.IOException ioex = ((global::System.IO.IOException) (e1) );
									if (( ( ioex as global::System.Exception ).GetBaseException() is global::System.Net.Sockets.SocketException )) {
										#line 264 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
										global::System.Net.Sockets.SocketException sockex = ((global::System.Net.Sockets.SocketException) (( ioex as global::System.Exception ).GetBaseException()) );
										needClose = ( sockex.SocketErrorCode != global::System.Net.Sockets.SocketError.WouldBlock );
									}
									
								}
								
								#line 268 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("needClose ", global::haxe.root.Std.@string(needClose)), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"process", "hx.ws.WebSocketCommon", "src/hx/ws/WebSocketCommon.hx"}, new int[]{1981972957}, new double[]{((double) (268) )}));
								#line 270 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
								if (needClose) {
									#line 271 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
									global::haxe.Log.trace.__hx_invoke2_o(default(double), global::haxe.lang.Runtime.concat("\u4ec0\u4e48\u7c7b\u578b\uff1f=", global::haxe.root.Std.@string(global::haxe.root.Type.@typeof(e1))), default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"process", "hx.ws.WebSocketCommon", "src/hx/ws/WebSocketCommon.hx"}, new int[]{1981972957}, new double[]{((double) (271) )}));
								}
								
							}
							
						}
						
						
						#line 280 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( needClose == false )) {
							#line 281 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this.handleData();
						}
						
					}
					
				}
				
				#line 286 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				if (( needClose == true )) {
					#line 287 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					if (( this.state != global::hx.ws.State.Closed )) {
						#line 288 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						try {
							#line 289 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							global::hx.ws.Log.debug("Closed", this.id);
							this.state = global::hx.ws.State.Closed;
							#line 291 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this._socket.close();
						}
						catch (global::System.Exception catchallException2){
							#line 288 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							global::haxe.lang.Exceptions.exception = catchallException2;
							#line 292 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							object e2 = ( (( catchallException2 is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException2) ).obj) : ((object) (catchallException2) ) );
						}
						
						
						#line 294 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						if (( this.onclose != null )) {
							#line 295 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
							this.onclose.__hx_invoke0_o();
						}
						
					}
					
				}
				
			}
			#line default
		}
		
		
		public virtual void sendHttpRequest(global::hx.ws.HttpRequest httpRequest) {
			#line 302 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			string data = httpRequest.build();
			#line 304 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.Log.data(data, this.id);
			#line 306 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			try {
				#line 307 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				this._socket.output.write(global::haxe.io.Bytes.ofString(data, null));
				this._socket.output.flush();
			}
			catch (global::System.Exception catchallException){
				#line 306 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				global::haxe.lang.Exceptions.exception = catchallException;
				#line 309 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				{
					#line 309 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					object e = ( (( catchallException is global::haxe.lang.HaxeException )) ? (((global::haxe.lang.HaxeException) (catchallException) ).obj) : ((object) (catchallException) ) );
					if (( this.onerror != null )) {
						#line 311 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onerror.__hx_invoke1_o(default(double), global::haxe.root.Std.@string(e));
					}
					
					#line 313 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					this.close();
				}
				
			}
			
			
		}
		#line default
		
		public virtual void sendHttpResponse(global::hx.ws.HttpResponse httpResponse) {
			#line 318 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			string data = httpResponse.build();
			#line 320 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.Log.data(data, this.id);
			#line 322 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			this._socket.output.write(global::haxe.io.Bytes.ofString(data, null));
			this._socket.output.flush();
		}
		#line default
		
		public virtual global::hx.ws.HttpRequest recvHttpRequest() {
			#line 327 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			if ( ! (this._buffer.endsWith("\r\n\r\n")) ) {
				#line 328 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				return null;
			}
			
			#line 331 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.HttpRequest httpRequest = new global::hx.ws.HttpRequest();
			while (true) {
				#line 333 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				string line = this._buffer.readLine();
				if (( ( line == null ) || ( line == "" ) )) {
					#line 335 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					break;
				}
				
				#line 337 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				httpRequest.addLine(line);
			}
			
			#line 341 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.Log.data(httpRequest.toString(), this.id);
			#line 343 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			return httpRequest;
		}
		#line default
		
		public virtual global::hx.ws.HttpResponse recvHttpResponse() {
			#line 347 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::haxe.root.Array response = this._buffer.readLinesUntil("\r\n\r\n");
			#line 349 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			if (( response == null )) {
				#line 350 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				return null;
			}
			
			#line 353 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.HttpResponse httpResponse = new global::hx.ws.HttpResponse();
			{
				#line 354 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				int _g = 0;
				#line 354 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				while (( _g < response.length )) {
					#line 354 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					string line = global::haxe.lang.Runtime.toString(response.__get(_g));
					#line 354 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					 ++ _g;
					if (( ( line == null ) || ( line == "" ) )) {
						#line 356 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					#line 358 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
					httpResponse.addLine(line);
				}
				
			}
			
			#line 362 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			global::hx.ws.Log.data(httpResponse.toString(), this.id);
			#line 364 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			return httpResponse;
		}
		#line default
		
		public string makeWSKey(string key) {
			#line 368 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			return global::haxe.crypto.Base64.encode(global::haxe.crypto.Sha1.make(global::haxe.io.Bytes.ofString(global::haxe.lang.Runtime.concat(key, "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"), null)), null);
		}
		#line default
		
		public override double __hx_setField_f(string field, int hash, double @value, bool handleProperties) {
			unchecked {
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (hash) {
					case 226403973:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._length = ((int) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1084680072:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._partialLength = ((int) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 247056493:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._opcode = ((int) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 460944723:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._lastError = ((object) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1216737445:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._onopenCalled = ((object) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 23515:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.id = ((int) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					default:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return base.__hx_setField_f(field, hash, @value, handleProperties);
					}
					
				}
				
			}
			#line default
		}
		
		
		public override object __hx_setField(string field, int hash, object @value, bool handleProperties) {
			unchecked {
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (hash) {
					case 624660685:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._lastPong = ((global::haxe.root.Date) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 653138191:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._payload = ((global::hx.ws.Buffer) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 2070371531:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._mask = ((global::haxe.io.Bytes) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 226403973:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._length = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1084680072:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._partialLength = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1554247961:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._frameIsBinary = global::haxe.lang.Runtime.toBool(@value);
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 247056493:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._opcode = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1528381236:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._isMasked = global::haxe.lang.Runtime.toBool(@value);
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1457020077:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._isFinal = global::haxe.lang.Runtime.toBool(@value);
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1057738399:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._buffer = ((global::hx.ws.Buffer) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 610977416:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onmessage = ((global::haxe.lang.Function) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1983511113:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onerror = ((global::haxe.lang.Function) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1265845817:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onclose = ((global::haxe.lang.Function) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 23388265:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.onopen = ((global::haxe.lang.Function) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 460944723:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._lastError = ((object) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 1216737445:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._onopenCalled = ((object) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 347970898:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this._socket = ((global::hx.ws.cs.NonBlockingSocket) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 67859985:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.state = ((global::hx.ws.State) (@value) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					case 23515:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.id = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return @value;
					}
					
					
					default:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return base.__hx_setField(field, hash, @value, handleProperties);
					}
					
				}
				
			}
			#line default
		}
		
		
		public override object __hx_getField(string field, int hash, bool throwErrors, bool isCheck, bool handleProperties) {
			unchecked {
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (hash) {
					case 257783349:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "makeWSKey", 257783349)) );
					}
					
					
					case 875792495:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "recvHttpResponse", 875792495)) );
					}
					
					
					case 2075401505:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "recvHttpRequest", 2075401505)) );
					}
					
					
					case 1900901265:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "sendHttpResponse", 1900901265)) );
					}
					
					
					case 1887398975:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "sendHttpRequest", 1887398975)) );
					}
					
					
					case 1900716655:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "process", 1900716655)) );
					}
					
					
					case 2050190630:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "prepareFrame", 2050190630)) );
					}
					
					
					case 1381630732:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "writeBytes", 1381630732)) );
					}
					
					
					case 1214453688:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "close", 1214453688)) );
					}
					
					
					case 1627978226:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "handleData", 1627978226)) );
					}
					
					
					case 624660685:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._lastPong;
					}
					
					
					case 653138191:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._payload;
					}
					
					
					case 2070371531:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._mask;
					}
					
					
					case 226403973:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._length;
					}
					
					
					case 1084680072:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._partialLength;
					}
					
					
					case 1554247961:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._frameIsBinary;
					}
					
					
					case 247056493:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._opcode;
					}
					
					
					case 1528381236:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._isMasked;
					}
					
					
					case 1457020077:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._isFinal;
					}
					
					
					case 1190344133:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "sendFrame", 1190344133)) );
					}
					
					
					case 1280347464:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "send", 1280347464)) );
					}
					
					
					case 1057738399:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._buffer;
					}
					
					
					case 610977416:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.onmessage;
					}
					
					
					case 1983511113:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.onerror;
					}
					
					
					case 1265845817:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.onclose;
					}
					
					
					case 23388265:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.onopen;
					}
					
					
					case 460944723:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._lastError;
					}
					
					
					case 1216737445:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._onopenCalled;
					}
					
					
					case 347970898:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this._socket;
					}
					
					
					case 67859985:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.state;
					}
					
					
					case 23515:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.id;
					}
					
					
					default:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return base.__hx_getField(field, hash, throwErrors, isCheck, handleProperties);
					}
					
				}
				
			}
			#line default
		}
		
		
		public override double __hx_getField_f(string field, int hash, bool throwErrors, bool handleProperties) {
			unchecked {
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (hash) {
					case 226403973:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (this._length) );
					}
					
					
					case 1084680072:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (this._partialLength) );
					}
					
					
					case 247056493:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (this._opcode) );
					}
					
					
					case 460944723:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (global::haxe.lang.Runtime.toDouble(this._lastError)) );
					}
					
					
					case 1216737445:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (global::haxe.lang.Runtime.toDouble(this._onopenCalled)) );
					}
					
					
					case 23515:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return ((double) (this.id) );
					}
					
					
					default:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return base.__hx_getField_f(field, hash, throwErrors, handleProperties);
					}
					
				}
				
			}
			#line default
		}
		
		
		public override object __hx_invokeField(string field, int hash, object[] dynargs) {
			unchecked {
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				switch (hash) {
					case 257783349:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.makeWSKey(global::haxe.lang.Runtime.toString(((object) (dynargs[0]) )));
					}
					
					
					case 875792495:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.recvHttpResponse();
					}
					
					
					case 2075401505:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.recvHttpRequest();
					}
					
					
					case 1900901265:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.sendHttpResponse(((global::hx.ws.HttpResponse) (((object) (dynargs[0]) )) ));
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1887398975:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.sendHttpRequest(((global::hx.ws.HttpRequest) (((object) (dynargs[0]) )) ));
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1900716655:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.process();
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 2050190630:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return this.prepareFrame(((global::haxe.io.Bytes) (((object) (dynargs[0]) )) ), ((int) (global::haxe.lang.Runtime.toInt(((object) (dynargs[1]) ))) ), global::haxe.lang.Runtime.toBool(((object) (dynargs[2]) )));
					}
					
					
					case 1381630732:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.writeBytes(((global::haxe.io.Bytes) (((object) (dynargs[0]) )) ));
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1214453688:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.close();
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1627978226:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.handleData();
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1190344133:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.sendFrame(((global::haxe.io.Bytes) (((object) (dynargs[0]) )) ), ((int) (global::haxe.lang.Runtime.toInt(((object) (dynargs[1]) ))) ));
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					case 1280347464:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						this.send(((global::haxe.io.Bytes) (((object) (dynargs[0]) )) ));
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						break;
					}
					
					
					default:
					{
						#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
						return base.__hx_invokeField(field, hash, dynargs);
					}
					
				}
				
				#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
				return null;
			}
			#line default
		}
		
		
		public override void __hx_getFields(global::haxe.root.Array baseArr) {
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_lastPong");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_payload");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_mask");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_length");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_partialLength");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_frameIsBinary");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_opcode");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_isMasked");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_isFinal");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_buffer");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("onmessage");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("onerror");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("onclose");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("onopen");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_lastError");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_onopenCalled");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("_socket");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("state");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			baseArr.push("id");
			#line 8 "D:\\project\\sangong\\sangong\\src\\hx\\ws\\WebSocketCommon.hx"
			base.__hx_getFields(baseArr);
		}
		#line default
		
	}
}


